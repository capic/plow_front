<div class="modal-body wrapper-lg">
  <form role="form" class="form-horizontal">
    <div class="row">
      <tabset class="tab-container">
        <tab heading="{{'infosPlowdown.form.GENERAL' | translate}}">
          <!--link + priority-->
          <div class="form-group">
            <label class="col-lg-1 control-label">{{'infosPlowdown.form.LINK' | translate}}</label>

            <div class="col-lg-7">
              <input class="form-control" type="text" disabled="disabled" value="{{download.link}}"></input>
            </div>

            <div class="col-lg-1">
              {{download.download_host.name}}
              <!--<img ng-src="{{download.download_host.picture}}" />-->
            </div>

            <label class="col-lg-1 control-label">{{'infosPlowdown.form.PRIORITY' | translate}}</label>

            <div class="col-lg-2">
              <select name="priority" class="form-control m-b disabled" ng-model="downloadPriority.selected"
                      ng-options="p.value | translate for p in downloadPriorities track by p.id"
                      disabled="download.status > 2">
              </select>
            </div>
          </div>
          <!--name-->
          <div class="form-group"
               data-ng-class="{'has-error': (download.status != 2 && download.status != 1) && !download.fileExists}">
            <label class="col-lg-1 control-label">{{'infosPlowdown.form.NAME' | translate}}</label>

            <div class="col-lg-6">
              <div class="input-group">
                <ui-select ng-model="edition.directory"
                           theme="bootstrap"
                           reset-search-input="false"
                           ng-disabled="download.status == 4 || download.status == 7 || download.status == 9 || (!download.fileExists && download.status != 1 && download.status != 2)"
                           tagging="processItem"
                           style="width: 300px;">
                  <ui-select-match placeholder="Enter a path...">{{$select.selected.path}}</ui-select-match>
                  <ui-select-choices repeat="path in listPath | filter: $select.search track by path.path"
                                     refresh-delay="0">
                    <a data-ng-if="listPath.length > 1" data-ng-click="deleteOption(path)" class="btn btn-action btn-xs"
                       href><i class="glyphicon glyphicon-trash"> </i></a>
                    <span ng-bind-html="path.path | highlight: $select.search"></span>
                  </ui-select-choices>
                </ui-select>
              </div>
            </div>

            <div class="col-lg-5" cg-busy="downloadFileExistsPromise">
              <input class="form-control" type="text" disabled="disabled"
                     data-ng-class="{'text-danger': !download.fileExists && download.status != 1 && download.status != 2}"
                     value="{{download.name}}"></input>
            </div>
          </div>
          <!--file size + % file-->
          <div class="form-group">
            <label class="col-lg-1 control-label">{{'infosPlowdown.form.SIZE_FILE' | translate}}</label>

            <div class="col-lg-5">
              <input class="form-control" type="text" disabled="disabled"
                     value="{{download.size_file_downloaded | bytesFltr}} / {{download.size_file | bytesFltr}}"></input>
            </div>

            <label class="col-lg-2 control-label">{{'infosPlowdown.form.PROGRESS_FILE' | translate}}</label>

            <div class="col-lg-4">
              <progressbar class="progress-striped active m-t-sm" value="download.progress_file" type="success">
                <b>{{download.progress_file}}%</b>
              </progressbar>
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-1 control-label">{{'infosPlowdown.form.TIME_SPENT' |
              translate}}</label>

            <div class="col-lg-3">
              <input type="text" class="form-control" disabled="disabled"
                     value="{{download.time_spent | timeFltr}}"></input>
            </div>
            <label class="col-lg-2 control-label">{{'infosPlowdown.form.TIME_LEFT' |
              translate}}</label>

            <div class="col-lg-2">
              <input type="text" class="form-control" disabled="disabled"
                     value="{{download.time_left | timeFltr}}"></input>
            </div>

            <label class="col-lg-2 control-label">{{'infosPlowdown.form.CURRENT_SPEED' |
              translate}}</label>

            <div class="col-lg-2">
              <input type="text" class="form-control" disabled="disabled"
                     value="{{download.current_speed | bytesPerSecondFltr}}"></input>
            </div>
          </div>
        </tab>
        <tab heading="{{'infosPlowdown.form.OTHER' | translate}}">
          <div class="form-group">
            <label class="col-lg-2 control-label">Id</label>

            <div class="col-lg-2">
              <input type="text" class="form-control" disabled="disabled" value="{{download.id}}"></input>
            </div>

            <label class="col-lg-2 control-label">{{'infosPlowdown.form.STATUS' | translate}}</label>

            <div class="col-lg-2">
              <input class="form-control" type="text" disabled="disabled"
                     value="{{download.status | downloadStatusFltr2}}"></input>
            </div>

            <label class="col-lg-2 control-label">{{'infosPlowdown.form.AVERAGE_SPEED' |
              translate}}</label>

            <div class="col-lg-2">
              <input type="text" class="form-control" disabled="disabled"
                     value="{{download.average_speed | bytesPerSecondFltr}}"></input>
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-2 control-label">{{'infosPlowdown.form.FILE_PATH' |
              translate}}</label>

            <div class="col-lg-10">
              <input type="text" class="form-control" disabled="disabled"
                     value="{{download.file_path}}"></input>
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-2 control-label">{{'infosPlowdown.form.SIZE_PART' | translate}}</label>

            <div class="col-lg-4">
              <input class="form-control" type="text" disabled="disabled"
                     value="{{download.size_part_downloaded | bytesFltr}} / {{download.size_part | bytesFltr}}"></input>
            </div>

            <label class="col-lg-2 control-label">{{'infosPlowdown.form.PROGRESS_PART' | translate}}</label>

            <div class="col-lg-4">
              <progressbar class="progress-striped active m-t-sm" value="download.progress_part" type="success"><b>{{download.progress_part}}%</b>
              </progressbar>
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-2 control-label">{{'infosPlowdown.form.PID_PYTHON' | translate}}</label>

            <div class="col-lg-2">
              <input class="form-control" type="text" disabled="disabled" value="{{download.pid_python}}"></input>
            </div>

            <label class="col-lg-2 control-label">{{'infosPlowdown.form.PID_PLOWDOWN' | translate}}</label>

            <div class="col-lg-2">
              <input class="form-control" type="text" disabled="disabled"
                     value="{{download.pid_plowdown}}"></input>
            </div>

            <label class="col-lg-2 control-label">{{'infosPlowdown.form.PID_CURL' | translate}}</label>

            <div class="col-lg-2">
              <input class="form-control" type="text" disabled="disabled"
                     value="{{download.pid_curl}}"></input>
            </div>
          </div>
        </tab>
        <tab heading="{{'infosPlowdown.form.LIFECYCLE' | translate}}">
          <div class="form-group">
            <label class="col-lg-2 control-label">{{'infosPlowdown.form.LIFECYCLE_INSERT_DATE' |
              translate}}</label>

            <div class="col-lg-3">
              <input type="text" class="form-control" disabled="disabled"
                     value="{{download.lifecycle_insert_date | date: 'dd/MM/yyyy HH:mm:ss': '-0200'}}"></input>
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-2 control-label">{{'infosPlowdown.form.LIFECYCLE_UPDATE_DATE' |
              translate}}</label>

            <div class="col-lg-3">
              <input class="form-control" type="text" disabled="disabled"
                     value="{{download.lifecycle_update_date | date: 'dd/MM/yyyy HH:mm:ss': '-0200'}}"></input>
            </div>
          </div>
          <div class="form-group" data-ng-if="startCounter > 0">
            <label class="col-lg-2 control-label">{{'infosPlowdown.form.START_COUNTER' | translate}}</label>

            <div class="col-lg-3">
              <p class="form-control-static">
                <timer interval="1000" countdown="startCounter">{{countdown | timeFltr}}</timer>
              </p>
            </div>
          </div>
        </tab>
        <tab ng-show="download.name.split('.')[(download.name.split('.').length - 1)] == 'rar'"
             heading="{{'infosPlowdown.form.MULTI_PARTS' | translate}}">
          <div id="gridMultiParts" ui-grid="gridOptions" ui-grid-resize-columns class="grid-package"
               data-ng-class="{'disabled': nbrDownloadsToFinishBeforeUnrar > 0}"
               cg-busy="downloadFileExistsPromise"></div>
          <div class="line line-dashed b-b line-lg pull-in"></div>
          <div class="form-group">
            <div class="col-lg-2">
              <div class="btn-group dropdown">
                <button class="btn btn-default" data-ng-click="unrar()" data-ng-disabled="download.status == 12">Unrar
                </button>
                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li><a href data-ng-if="download.status == 12">Stop</a></li>
                  <li><a href data-ng-if="download.status != 12" data-ng-click="deletePackageFiles()">Delete rar
                    files</a></li>
                  <!--<li><a href>Delete extracted files</a></li>-->
                </ul>
              </div>
            </div>
            <div class="col-lg-10">
              <progressbar class="progress-striped active sm-t-sm" value="download.download_package.unrar_progress"
                           type="success">
                <b>{{download.download_package.unrar_progress}}%</b>
              </progressbar>
            </div>
          </div>
        </tab>
        <tab heading="{{'infosPlowdown.form.ACTIONS_HISTORY' | translate}}">
          <div id="gridActions" ui-grid="gridActions" ui-grid-resize-columns ui-grid-grouping class="grid-package"
               cg-busy="downloadActionsHistoryPromise"></div>
          <div class="line line-dashed b-b line-lg pull-in"></div>
          <div class="form-group">
            <div class="col-lg-2">
              <div class="btn-group dropdown">
                <button class="btn btn-default" data-ng-click="addDownloadAction()">Add</button>
                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li><a href></a></li>
                  <li><a href></a></li>
                  <!--<li><a href>Delete extracted files</a></li>-->
                </ul>
              </div>
            </div>
            <div class="col-lg-10">
            </div>
          </div>
        </tab>
        <tab heading="{{'infosPlowdown.form.LOGS' | translate}}">
          <div class="form-group">
            <textarea class="form-control" rows="15" readonly wrap="off"
                      placeholder="{{'infosPlowdown.form.PLACE_HOLDER' | translate}}"
                      scroll-glue="autoscroll">{{download.logs.logs}}</textarea>
          </div>
          <div class="form-group">
            <label> {{'infosPlowdown.form.AUTOSCROLL' | translate}}</label>
            <label class="i-switch m-t-sm m-r">
              <input type="checkbox" data-ng-model="autoscroll"></input>
              <i></i>
            </label>
            <button type="submit" class="btn btn-warning pull-right" data-ng-click="delete()">
              {{'infosPlowdown.form.DELETE' |
              translate}}
            </button>
          </div>
        </tab>
      </tabset>
    </div>
  </form>
</div>
<footer class="panel-footer text-right bg-light lter">
  <button type="submit" class="btn btn-success" data-ng-click="ok()">Ok</button>
</footer>
